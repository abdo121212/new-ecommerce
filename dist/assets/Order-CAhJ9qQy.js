import{r as l,j as e,l as d,a as m}from"./index-C-DsA9f1.js";import p from"./Loading-DYMAjh0q.js";import{H as x}from"./Helmet-OhDTjJ-I.js";class i extends Error{}i.prototype.name="InvalidTokenError";function h(r){return decodeURIComponent(atob(r).replace(/(.)/g,(t,a)=>{let n=a.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n}))}function f(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return h(t)}catch{return atob(t)}}function u(r,t){if(typeof r!="string")throw new i("Invalid token specified: must be a string");t||(t={});const a=t.header===!0?0:1,n=r.split(".")[a];if(typeof n!="string")throw new i(`Invalid token specified: missing part #${a+1}`);let c;try{c=f(n)}catch(s){throw new i(`Invalid token specified: invalid base64 for part #${a+1} (${s.message})`)}try{return JSON.parse(c)}catch(s){throw new i(`Invalid token specified: invalid json for part #${a+1} (${s.message})`)}}function N(){const[r,t]=l.useState(null),a=localStorage.getItem("token");let{id:n}=u(a);async function c(){try{const s={url:`https://ecommerce.routemisr.com/api/v1/orders/user/${n}`,method:"GET"};let{data:o}=await m.request(s);t(o)}catch(s){console.log(s)}}return l.useEffect(()=>{c()},[]),e.jsxs("section",{className:"container px-14 mx-auto",children:[e.jsxs(x,{children:[e.jsx("title",{children:"Orders - Freshcart"}),e.jsx("meta",{name:"description",content:"Track your orders and manage your purchases with ease at Freshcart."}),e.jsx("meta",{name:"keywords",content:"Orders, Freshcart, Shopping, Order History, Online Store"}),e.jsx("meta",{property:"og:title",content:"Orders - Freshcart"}),e.jsx("meta",{property:"og:description",content:"View and manage all your orders in one place. Check your order status and history on Freshcart."})]}),e.jsxs("div",{className:"flex items-center gap-x-8 py-5",children:[e.jsx(d,{className:"animate-bounce text-5xl  text-main "}),e.jsx("h1",{className:"text-3xl md:text-5xl font-bold mb-8 text-main border-b-4  pb-4 ",children:"Order History"})]}),r?e.jsx("section",{className:"space-y-5",children:r.map(s=>e.jsxs("div",{className:"order p-5 border-2 border-solid border-main  rounded-lg",children:[e.jsxs("header",{className:"flex flex-wrap gap-4 sm:gap-0 items-center justify-between mb-8 bg-slate-50 p-2 shadow-md",children:[e.jsxs("h3",{className:"text-xl font-bold pl-2 text-main",children:["Order ID :"," ",e.jsxs("span",{className:"font-bold text-black bg-gray-200 px-2 py-1 rounded-md",children:[" ","#",s.id]})]}),e.jsxs("div",{className:"status text-white flex gap-2 items-center font-cairo",children:[s.isPaid?e.jsxs("h4",{className:"bg-maintext-main flex items-center p-2 rounded-md w-fit",children:[e.jsx("i",{className:"fa-solid fa-circle-check mr-2"}),"Paid"]}):e.jsxs("h4",{className:"bg-red-600 p-2 rounded-md w-fit flex items-center",children:[e.jsx("i",{className:"fa-solid fa-circle-xmark mr-2"}),"Not Paid"]}),s.isDelivered?e.jsxs("h4",{className:"bg-blue-600 p-2 rounded-md w-fit flex items-center",children:[e.jsx("i",{className:"fa-solid fa-truck mr-2 animate-pulse"}),"Delivered"]}):e.jsxs("h4",{className:"bg-blue-400 p-2 rounded-md w-fit flex items-center",children:[e.jsx("i",{className:"fa-solid fa-hourglass-half mr-2"}),"In Transit"]})]})]}),e.jsx("div",{className:"all-product-order gap-3 grid grid-cols-12 mb-5",children:s.cartItems.map(o=>e.jsxs("div",{className:"card shadow-md rounded-md overflow-hidden col-span-12 md:col-span-6 lg:col-span-2",children:[e.jsx("img",{className:"w-full  h-48 lg:h-60 object-contain lg:object-cover   mb-3 ",src:o.product.imageCover,alt:o.product.title}),e.jsxs("div",{className:"body-card px-3 py-2 space-y-[2px]",children:[e.jsxs("h2",{className:"font-bold line-clamp-1",children:[o.product.title," "]}),e.jsxs("h3",{className:"text-lg font-bold text-main",children:[o.price," L.E"]})]})]},o._id))}),e.jsxs("div",{className:"pl-2 text-lg",children:["Total Order Price :"," ",e.jsx("span",{className:"text-main font-bold px-5",children:s.totalOrderPrice}),"L.E"]})]},s.id))}):e.jsx(p,{})]})}export{N as default};
